# 音频处理工具

一款基于Python和PySimpleGUI开发的音频处理软件，具备音频拼接和格式转换等功能。

## 功能特点

1. **FFmpeg检测**：软件启动时自动检测并显示本机FFmpeg的安装状态和版本信息
2. **文件夹选择**：支持选择文件夹并扫描其中的所有音频文件
3. **缺失文件检查**：可检查文件夹内的音频文件名是否缺少数字序列中的某些文件，并生成缺失文件清单
4. **音频合并**：将文件夹内的所有音频文件合并为一个文件，并支持删除原始文件
5. **格式转换**：将音频文件转换为指定格式，支持单独的转换页面，可配置详细转换参数
6. **配置保存**：自动保存用户上次使用的文件夹路径和配置选项

## 安装要求

1. **Python环境**：需要安装Python 3.6或更高版本
2. **FFmpeg**：必须安装FFmpeg并添加到系统环境变量中
3. **Python库**：需要安装PySimpleGUI库

## 安装步骤

### 1. 安装FFmpeg

- **Windows**：
  1. 从 [FFmpeg官网](https://ffmpeg.org/download.html) 下载Windows版本
  2. 解压到本地目录（如 `C:\ffmpeg`）
  3. 将 `C:\ffmpeg\bin` 添加到系统环境变量Path中
  4. 打开命令提示符，输入 `ffmpeg -version` 验证安装是否成功

- **macOS**：
  使用Homebrew安装：`brew install ffmpeg`

- **Linux**：
  Ubuntu/Debian: `sudo apt-get install ffmpeg`
  CentOS/RHEL: `sudo yum install ffmpeg`

### 2. 安装Python库

打开命令提示符，执行以下命令安装PySimpleGUI：

```
pip install pysimplegui
```

## 使用方法

1. **启动软件**：
   - 双击 `start.bat` 文件启动软件（Windows系统）
   - 或在命令行中运行：`python audio_processor.py`

2. **选择文件夹**：
   - 点击"浏览"按钮选择包含音频文件的文件夹
   - 或直接在输入框中输入文件夹路径

3. **扫描文件**：
   - 点击"扫描文件"按钮，软件会自动扫描选定文件夹中的所有音频文件
   - 扫描结果会显示在"音频文件列表"区域
   - 如果勾选了"检查缺失的音频文件"选项，软件会检查数字序列的完整性并生成缺失文件清单

4. **合并音频**：
   - 点击"合并音频"按钮，软件会使用FFmpeg将所有音频文件合并为一个MP3文件
   - 合并完成后，会询问是否删除原始音频文件

5. **转换格式**：
   - 点击"转换格式"按钮，打开单独的转换格式页面
   - 在转换页面中选择音频文件夹并扫描文件
   - 选择要转换的音频文件，查看其详细信息（时长、编码方式、码率等）
   - 配置转换参数（输出格式、编码器、比特率、声道数、采样率等）
   - 点击"转换选中文件"或"转换所有文件"执行转换操作
   - 转换后的文件会保存在原文件夹下的 `converted_<格式>` 子文件夹中
   - 配置参数会自动保存，下次打开时使用上次的配置

## 支持的音频格式

- MP3
- WAV
- FLAC
- AAC
- OGG
- WMA
- M4A
- TS

## 注意事项

1. 请确保已正确安装并配置FFmpeg，否则软件将无法正常工作
2. 合并音频文件时，FFmpeg会按照文件名排序，如果文件名包含数字，会尝试按数字顺序排序
3. 转换大量或大文件可能需要较长时间，请耐心等待
4. 软件会在同目录下创建 `config.json` 文件保存用户配置

## 常见问题

### Q: 为什么启动时提示找不到FFmpeg？
A: 请检查FFmpeg是否已正确安装并添加到系统环境变量中。可以在命令提示符中输入 `ffmpeg -version` 验证。

### Q: 音频合并后音质下降怎么办？
A: 软件使用 `-c copy` 参数进行无损合并，但只适用于相同编码格式的文件。如果文件格式不同，FFmpeg会自动重新编码。

### Q: 转换格式时出现错误怎么办？
A: 请检查原始音频文件是否损坏，或尝试使用不同的目标格式。